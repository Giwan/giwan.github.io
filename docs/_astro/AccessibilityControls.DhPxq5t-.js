import{j as n}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.BVOCwoKb.js";import{B as m}from"./button.C48yv3co.js";import{c as u}from"./createLucideIcon.tO8mbuOy.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],x=u("eye-off",y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],k=u("eye",v);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],M=u("keyboard",N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],A=u("settings",w);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],T=u("volume-2",j);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],S=u("volume-x",E);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],C=u("zap-off",R);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],L=u("zap",P);class F{preferences;announcer=null;focusHistory=[];lastFocusedElement=null;isTransitioning=!1;constructor(){this.preferences=this.loadPreferences(),this.init()}init(){typeof document>"u"||(this.createScreenReaderAnnouncer(),this.setupTransitionEventListeners(),this.setupKeyboardNavigation(),this.setupReducedMotionHandling(),this.setupFocusManagement())}loadPreferences(){const e=typeof localStorage<"u"?localStorage.getItem("accessibility-preferences"):null,t={reducedMotion:this.detectReducedMotionPreference(),screenReaderAnnouncements:!0,focusManagement:!0,keyboardNavigation:!0};if(e)try{return{...t,...JSON.parse(e)}}catch{return t}return t}detectReducedMotionPreference(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}createScreenReaderAnnouncer(){this.preferences.screenReaderAnnouncements&&(this.announcer=document.createElement("div"),this.announcer.setAttribute("aria-live","polite"),this.announcer.setAttribute("aria-atomic","true"),this.announcer.className="sr-only",this.announcer.id="accessibility-announcer",this.announcer.style.cssText=`
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0, 0, 0, 0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    `,document.body.appendChild(this.announcer))}setupTransitionEventListeners(){document.addEventListener("astro:before-preparation",this.handleTransitionStart.bind(this)),document.addEventListener("astro:after-swap",this.handleTransitionComplete.bind(this)),document.addEventListener("astro:page-load",this.handlePageLoad.bind(this))}handleTransitionStart(e){if(this.isTransitioning=!0,this.lastFocusedElement=document.activeElement,this.preferences.screenReaderAnnouncements){const t=e,s=t.detail?.from?.pathname||"current page",i=t.detail?.to?.pathname||"new page";this.announce({message:`Navigating from ${this.getPageTitle(s)} to ${this.getPageTitle(i)}`,priority:"polite"})}this.applyReducedMotionPreferences()}handleTransitionComplete(){if(this.isTransitioning=!1,this.preferences.focusManagement&&this.manageFocusAfterTransition(),this.preferences.screenReaderAnnouncements){const e=document.title||"New page";this.announce({message:`${e} loaded`,priority:"polite",delay:100})}}handlePageLoad(){this.updateLandmarkTransitionNames(),this.setupSkipLinks()}setupKeyboardNavigation(){this.preferences.keyboardNavigation&&(document.addEventListener("keydown",e=>{e.ctrlKey&&e.key==="/"&&(e.preventDefault(),this.skipToMainContent()),e.altKey&&e.key==="ArrowLeft"&&(e.preventDefault(),this.navigateBack()),e.altKey&&e.key==="ArrowRight"&&(e.preventDefault(),this.navigateForward()),(e.ctrlKey||e.metaKey)&&e.key==="k"&&(e.preventDefault(),this.focusSearch()),e.key==="Escape"&&this.handleEscapeKey(),e.key==="Tab"&&this.isTransitioning&&this.handleTabDuringTransition(e)}),document.addEventListener("focusin",e=>{this.isTransitioning&&this.handleFocusDuringTransition(e)}))}setupReducedMotionHandling(){window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",t=>{this.preferences.reducedMotion=t.matches,this.applyReducedMotionPreferences(),this.savePreferences()})}applyReducedMotionPreferences(){const e=document.documentElement;this.preferences.reducedMotion?(e.setAttribute("data-reduced-motion","true"),e.style.setProperty("--transition-duration-fast","0ms"),e.style.setProperty("--transition-duration-normal","0ms"),e.style.setProperty("--transition-duration-slow","0ms")):(e.removeAttribute("data-reduced-motion"),e.style.removeProperty("--transition-duration-fast"),e.style.removeProperty("--transition-duration-normal"),e.style.removeProperty("--transition-duration-slow"))}setupFocusManagement(){this.preferences.focusManagement&&document.addEventListener("focusin",e=>{this.isTransitioning||(this.focusHistory.push(e.target),this.focusHistory.length>10&&this.focusHistory.shift())})}manageFocusAfterTransition(){const e=document.getElementById("main-content");if(e){e.setAttribute("tabindex","-1"),e.focus(),setTimeout(()=>{e.removeAttribute("tabindex")},100);return}const t=this.getFirstFocusableElement();t&&t.focus()}getFirstFocusableElement(){const e=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[tabindex]:not([tabindex="-1"])'];for(const t of e){const s=document.querySelector(t);if(s&&this.isElementVisible(s))return s}return null}isElementVisible(e){const t=e.getBoundingClientRect();return t.width>0&&t.height>0&&window.getComputedStyle(e).visibility!=="hidden"}updateLandmarkTransitionNames(){const e=document.querySelector("main");e&&!e.style.viewTransitionName&&(e.style.viewTransitionName="main-content");const t=document.querySelector('nav[aria-label="Main navigation"]');t&&!t.style.viewTransitionName&&(t.style.viewTransitionName="navigation");const s=document.querySelector('header[role="banner"]');s&&!s.style.viewTransitionName&&(s.style.viewTransitionName="header");const i=document.querySelector('footer[role="contentinfo"]');i&&!i.style.viewTransitionName&&(i.style.viewTransitionName="footer"),document.querySelectorAll(".skip-link").forEach((c,r)=>{c.style.viewTransitionName||(c.style.viewTransitionName=`skip-link-${r}`)})}setupSkipLinks(){document.querySelectorAll(".skip-link").forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const i=t.getAttribute("href");if(i&&i.startsWith("#")){const o=document.querySelector(i);if(o){const c=o.getAttribute("tabindex");if(c||o.setAttribute("tabindex","-1"),o.focus(),o.scrollIntoView({behavior:this.preferences.reducedMotion?"auto":"smooth",block:"start"}),this.preferences.screenReaderAnnouncements){const r=this.getSkipTargetName(i);this.announce({message:`Skipped to ${r}`,priority:"polite",delay:100})}c||setTimeout(()=>{o.removeAttribute("tabindex")},100)}}})})}getSkipTargetName(e){return{"#main-content":"main content","#navigation":"navigation","#footer":"footer","#search":"search","#sidebar":"sidebar"}[e]||e.substring(1)}announce(e){if(!this.announcer||!this.preferences.screenReaderAnnouncements)return;const t=()=>{this.announcer&&(this.announcer.setAttribute("aria-live",e.priority),this.announcer.textContent=e.message,setTimeout(()=>{this.announcer&&(this.announcer.textContent="")},1e3))};e.delay?setTimeout(t,e.delay):t()}skipToMainContent(){const e=document.getElementById("main-content");e&&(e.setAttribute("tabindex","-1"),e.focus(),e.scrollIntoView({behavior:"smooth"}),setTimeout(()=>{e.removeAttribute("tabindex")},100))}navigateBack(){window.history.length>1&&window.history.back()}navigateForward(){window.history.forward()}focusSearch(){const e=document.querySelector('input[type="search"], input[name="search"], #search-input');e&&(e.focus(),this.preferences.screenReaderAnnouncements&&this.announce({message:"Search focused",priority:"polite"}))}handleEscapeKey(){const e=document.querySelectorAll('[role="dialog"][aria-hidden="false"], .modal.open, .panel.open');e.length>0&&e.forEach(t=>{const s=t.querySelector('[aria-label*="close"], [aria-label*="Close"], .close-button');s&&s.click()})}handleTabDuringTransition(e){const t=document.getElementById("main-content");if(!t)return;const s=t.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])');if(s.length===0)return;const i=s[0],o=s[s.length-1];e.shiftKey?document.activeElement===i&&(e.preventDefault(),o.focus()):document.activeElement===o&&(e.preventDefault(),i.focus())}handleFocusDuringTransition(e){const t=e.target;if(t&&this.preferences.screenReaderAnnouncements){const s=t.tagName.toLowerCase(),i=t.getAttribute("role"),o=t.getAttribute("aria-label")||t.textContent?.trim();o&&(s==="button"||s==="a"||i)&&t.matches('[aria-describedby], [aria-expanded], [role="button"], [role="link"]')&&this.announce({message:`Focused on ${o}`,priority:"polite",delay:200})}}getPageTitle(e){const t={"/":"Home","/blog":"Blog","/tools":"Tools","/about":"About","/contact":"Contact","/search":"Search","/offline":"Offline"};return t[e]?t[e]:e.startsWith("/blog/")?"Blog Article":e.startsWith("/tools/")?"Tools Category":"Page"}updatePreferences(e){this.preferences={...this.preferences,...e},this.savePreferences(),this.applyReducedMotionPreferences()}savePreferences(){typeof localStorage<"u"&&localStorage.setItem("accessibility-preferences",JSON.stringify(this.preferences))}getPreferences(){return{...this.preferences}}destroy(){this.announcer&&(document.body.removeChild(this.announcer),this.announcer=null)}}const h=new F,$=()=>{const[a,e]=l.useState(h.getPreferences());l.useEffect(()=>{const d=()=>{e(h.getPreferences())},f=window.matchMedia("(prefers-reduced-motion: reduce)");return f.addEventListener("change",d),()=>{f.removeEventListener("change",d)}},[]);const t=l.useCallback(d=>{h.updatePreferences(d),e(h.getPreferences())},[]),s=l.useCallback(d=>{h.announce(d)},[]),i=l.useCallback(()=>{t({reducedMotion:!a.reducedMotion})},[a.reducedMotion,t]),o=l.useCallback(()=>{t({screenReaderAnnouncements:!a.screenReaderAnnouncements})},[a.screenReaderAnnouncements,t]),c=l.useCallback(()=>{t({focusManagement:!a.focusManagement})},[a.focusManagement,t]),r=l.useCallback(()=>{t({keyboardNavigation:!a.keyboardNavigation})},[a.keyboardNavigation,t]);return{preferences:a,updatePreferences:t,announce:s,isReducedMotion:a.reducedMotion,toggleReducedMotion:i,toggleScreenReaderAnnouncements:o,toggleFocusManagement:c,toggleKeyboardNavigation:r}},_=()=>{const[a,e]=l.useState(!1),{preferences:t,toggleReducedMotion:s,toggleScreenReaderAnnouncements:i,toggleFocusManagement:o,toggleKeyboardNavigation:c,announce:r}=$(),d=()=>{e(!a),r(a?{message:"Accessibility controls panel closed",priority:"polite"}:{message:"Accessibility controls panel opened",priority:"polite"})},f=()=>{s(),r({message:`Reduced motion ${t.reducedMotion?"disabled":"enabled"}`,priority:"polite"})},p=()=>{i(),r({message:`Screen reader announcements ${t.screenReaderAnnouncements?"disabled":"enabled"}`,priority:"polite"})},g=()=>{o(),r({message:`Focus management ${t.focusManagement?"disabled":"enabled"}`,priority:"polite"})},b=()=>{c(),r({message:`Keyboard navigation enhancements ${t.keyboardNavigation?"disabled":"enabled"}`,priority:"polite"})};return n.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[n.jsx(m,{onClick:d,variant:"outline",size:"icon",className:"h-12 w-12 rounded-full shadow-lg bg-background border-2 hover:bg-accent focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":a?"Close accessibility controls":"Open accessibility controls","aria-expanded":a,"aria-controls":"accessibility-controls-panel",children:n.jsx(A,{className:"h-5 w-5"})}),a&&n.jsxs("div",{id:"accessibility-controls-panel",className:"absolute bottom-16 right-0 w-80 bg-background border border-border rounded-lg shadow-xl p-4 space-y-4",role:"dialog","aria-labelledby":"accessibility-controls-title","aria-describedby":"accessibility-controls-description",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{id:"accessibility-controls-title",className:"text-lg font-semibold text-foreground",children:"Accessibility Settings"}),n.jsx(m,{onClick:d,variant:"ghost",size:"sm",className:"h-8 w-8 p-0","aria-label":"Close accessibility controls",children:"×"})]}),n.jsx("p",{id:"accessibility-controls-description",className:"text-sm text-muted-foreground",children:"Customize your accessibility preferences for a better browsing experience."}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[t.reducedMotion?n.jsx(C,{className:"h-5 w-5 text-muted-foreground"}):n.jsx(L,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:"Reduced Motion"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Minimize animations and transitions"})]})]}),n.jsx(m,{onClick:f,variant:t.reducedMotion?"default":"outline",size:"sm","aria-label":`${t.reducedMotion?"Disable":"Enable"} reduced motion`,"aria-pressed":t.reducedMotion,children:t.reducedMotion?"On":"Off"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[t.screenReaderAnnouncements?n.jsx(T,{className:"h-5 w-5 text-primary"}):n.jsx(S,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:"Screen Reader Announcements"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Announce page changes and navigation"})]})]}),n.jsx(m,{onClick:p,variant:t.screenReaderAnnouncements?"default":"outline",size:"sm","aria-label":`${t.screenReaderAnnouncements?"Disable":"Enable"} screen reader announcements`,"aria-pressed":t.screenReaderAnnouncements,children:t.screenReaderAnnouncements?"On":"Off"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[t.focusManagement?n.jsx(k,{className:"h-5 w-5 text-primary"}):n.jsx(x,{className:"h-5 w-5 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:"Focus Management"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Automatically manage focus during navigation"})]})]}),n.jsx(m,{onClick:g,variant:t.focusManagement?"default":"outline",size:"sm","aria-label":`${t.focusManagement?"Disable":"Enable"} focus management`,"aria-pressed":t.focusManagement,children:t.focusManagement?"On":"Off"})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(M,{className:`h-5 w-5 ${t.keyboardNavigation?"text-primary":"text-muted-foreground"}`}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-foreground",children:"Keyboard Navigation"}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Enhanced keyboard shortcuts and navigation"})]})]}),n.jsx(m,{onClick:b,variant:t.keyboardNavigation?"default":"outline",size:"sm","aria-label":`${t.keyboardNavigation?"Disable":"Enable"} keyboard navigation enhancements`,"aria-pressed":t.keyboardNavigation,children:t.keyboardNavigation?"On":"Off"})]})]}),n.jsx("div",{className:"pt-3 border-t border-border",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("div",{className:"font-medium mb-2",children:"Keyboard Shortcuts:"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{children:[n.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"Ctrl + /"})," Skip to main content"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"Alt + ←"})," Navigate back"]}),n.jsxs("div",{children:[n.jsx("kbd",{className:"px-1 py-0.5 bg-muted rounded text-xs",children:"Alt + →"})," Navigate forward"]})]})]})})]})]})};export{_ as AccessibilityControls};
