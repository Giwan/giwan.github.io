import{j as l}from"./jsx-runtime.D_zvdyIk.js";import{B as k}from"./button.C48yv3co.js";import{r as d}from"./index.BVOCwoKb.js";import{c as w}from"./createLucideIcon.tO8mbuOy.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],x=w("monitor",E);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],S=w("moon",N);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],p=w("sun",j),b="modulepreload",L=function(o){return"/"+o},T={},_=function(h,n,g){let m=Promise.resolve();if(n&&n.length>0){let a=function(t){return Promise.all(t.map(c=>Promise.resolve(c).then(i=>({status:"fulfilled",value:i}),i=>({status:"rejected",reason:i}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),e=r?.nonce||r?.getAttribute("nonce");m=a(n.map(t=>{if(t=L(t),t in T)return;T[t]=!0;const c=t.endsWith(".css"),i=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${i}`))return;const s=document.createElement("link");if(s.rel=c?"stylesheet":b,c||(s.as="script"),s.crossOrigin="",s.href=t,e&&s.setAttribute("nonce",e),document.head.appendChild(s),c)return new Promise((f,y)=>{s.addEventListener("load",f),s.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${t}`)))})}))}function u(a){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=a,window.dispatchEvent(r),!r.defaultPrevented)throw a}return m.then(a=>{for(const r of a||[])r.status==="rejected"&&u(r.reason);return h().catch(u)})};typeof window<"u"&&_(()=>import("./transitionController.DXuiG6hA.js").then(o=>o.c),[]).then(o=>{o.transitionController});const M=()=>{const o=()=>{if(typeof window>"u")return"system";const e=localStorage.getItem("theme");return e&&["light","dark","system"].includes(e)?e:"system"},h=()=>{if(typeof window>"u")return"light";const e=document.documentElement;return e.classList.contains("dark")||e.getAttribute("data-theme")==="dark"?"dark":"light"},[n,g]=d.useState(o),[m,u]=d.useState(h);return d.useEffect(()=>{const e=()=>{const i=document.documentElement;let s;n==="system"?s=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":s=n,u(s);const f=()=>{s==="dark"?(i.classList.add("dark"),i.setAttribute("data-theme","dark")):(i.classList.remove("dark"),i.setAttribute("data-theme","light"))},y=document.documentElement.hasAttribute("data-transition-direction");if(typeof document<"u"&&"startViewTransition"in document&&!y)try{document.startViewTransition(()=>f())}catch(v){console.warn("View transition failed, using fallback:",v),f()}else f();localStorage.setItem("theme",n)};e();const t=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{n==="system"&&e()};return t.addEventListener("change",c),()=>{t.removeEventListener("change",c)}},[n]),{theme:n,resolvedTheme:m,toggleTheme:()=>{g(e=>{switch(e){case"light":return"dark";case"dark":return"system";case"system":return"light";default:return"light"}})},setTheme:e=>{g(e)}}},C=()=>{const{theme:o,toggleTheme:h}=M(),n=d.useRef(null),g=()=>{switch(o){case"light":return l.jsx(p,{className:"h-4 w-4"});case"dark":return l.jsx(S,{className:"h-4 w-4"});case"system":return l.jsx(x,{className:"h-4 w-4"});default:return l.jsx(p,{className:"h-4 w-4"})}},m=()=>{switch(o){case"light":return"Switch to dark mode";case"dark":return"Switch to system theme";case"system":return"Switch to light mode";default:return"Toggle theme"}},u=()=>{if(document.documentElement.hasAttribute("data-transition-direction")){const t=()=>{h(),document.removeEventListener("astro:after-swap",t)};document.addEventListener("astro:after-swap",t)}else h()},[a,r]=d.useState(!1);return d.useEffect(()=>{r(!0)},[]),d.useEffect(()=>{n.current&&(n.current.style.viewTransitionName="theme-toggle")},[]),a?l.jsxs(k,{ref:n,variant:"ghost",size:"icon",onClick:u,title:m(),className:"h-9 w-9",style:{viewTransitionName:"theme-toggle"},children:[g(),l.jsx("span",{className:"sr-only",children:m()})]}):l.jsxs(k,{variant:"ghost",size:"icon",className:"h-9 w-9",disabled:!0,style:{viewTransitionName:"theme-toggle"},children:[l.jsx(p,{className:"h-4 w-4"}),l.jsx("span",{className:"sr-only",children:"Loading theme toggle"})]})};export{C as ThemeToggle};
