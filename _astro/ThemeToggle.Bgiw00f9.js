import{j as d}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.RH_Wq4ov.js";import{B as w}from"./button.CKqbtVu8.js";import{c as v}from"./createLucideIcon.DCnupLqN.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],I=v("monitor",R);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],_=v("moon",N);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],M=v("sun",D),b="modulepreload",j=function(o){return"/"+o},A={},H=function(a,s,g){let u=Promise.resolve();if(s&&s.length>0){let l=function(n){return Promise.all(n.map(m=>Promise.resolve(m).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),t=i?.nonce||i?.getAttribute("nonce");u=l(s.map(n=>{if(n=j(n),n in A)return;A[n]=!0;const m=n.endsWith(".css"),c=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${c}`))return;const r=document.createElement("link");if(r.rel=m?"stylesheet":b,m||(r.as="script"),r.crossOrigin="",r.href=n,t&&r.setAttribute("nonce",t),document.head.appendChild(r),m)return new Promise((f,y)=>{r.addEventListener("load",f),r.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${n}`)))})}))}function T(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return u.then(l=>{for(const i of l||[])i.status==="rejected"&&T(i.reason);return a().catch(T)})},S=()=>typeof window>"u",e={LIGHT:"light",DARK:"dark",SYSTEM:"system"},k="theme",E="data-theme",K="data-transition-direction",p="dark",L="(prefers-color-scheme: dark)";S()||H(()=>import("./transitionController.CxYAGZHG.js").then(o=>o.a),[]).then(o=>{o.transitionController});const G=()=>{const o=()=>{if(S())return e.SYSTEM;const t=localStorage.getItem(k);return t&&[e.LIGHT,e.DARK,e.SYSTEM].includes(t)?t:e.SYSTEM},a=()=>{if(S())return e.LIGHT;const t=document.documentElement;return t.classList.contains(p)||t.getAttribute(E)===e.DARK?e.DARK:e.LIGHT},[s,g]=h.useState(o),[u,T]=h.useState(a);return h.useEffect(()=>{const t=()=>{const c=document.documentElement;let r;s===e.SYSTEM?r=window.matchMedia(L).matches?e.DARK:e.LIGHT:r=s,T(r);const f=()=>{r===e.DARK?(c.classList.add(p),c.setAttribute(E,e.DARK)):(c.classList.remove(p),c.setAttribute(E,e.LIGHT))},y=document.documentElement.hasAttribute(K);if(typeof document<"u"&&"startViewTransition"in document&&!y)try{document.startViewTransition(()=>f())}catch(x){console.warn("View transition failed, using fallback:",x),f()}else f();localStorage.setItem(k,s)};t();const n=window.matchMedia(L),m=()=>s===e.SYSTEM&&t();return n.addEventListener("change",m),()=>{n.removeEventListener("change",m)}},[s]),{theme:s,resolvedTheme:u,toggleTheme:()=>{g(t=>{switch(t){case e.LIGHT:return e.DARK;case e.DARK:return e.SYSTEM;case e.SYSTEM:return e.LIGHT;default:return e.LIGHT}})},setTheme:t=>{g(t)}}},Y=(o="light")=>{const a="h-4 w-4 transition-all duration-300";return{light:d.jsx(_,{className:a}),dark:d.jsx(I,{className:a}),system:d.jsx(M,{className:a})}[o]},O=()=>{const{theme:o,toggleTheme:a}=G(),s=h.useRef(null),g=()=>Y(o),u=()=>`Currently in ${o} mode. Click to switch to ${{light:"dark",dark:"system",system:"light"}[o]} mode.`,T=()=>{if(document.documentElement.hasAttribute("data-transition-direction")){const n=()=>{a(),document.removeEventListener("astro:after-swap",n)};document.addEventListener("astro:after-swap",n)}else a()},[l,i]=h.useState(!1);return h.useEffect(()=>{i(!0)},[]),h.useEffect(()=>{s.current&&(s.current.style.viewTransitionName="theme-toggle")},[]),l?d.jsxs(w,{ref:s,variant:"ghost",size:"icon",onClick:T,title:u(),className:"h-9 w-9",style:{viewTransitionName:"theme-toggle"},children:[g(),d.jsx("span",{className:"sr-only",children:u()})]}):d.jsxs(w,{variant:"ghost",size:"icon",className:"h-9 w-9",disabled:!0,style:{viewTransitionName:"theme-toggle"},children:[d.jsx(M,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Loading theme toggle"})]})};export{O as ThemeToggle};
