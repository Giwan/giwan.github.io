import{j as d}from"./jsx-runtime.D_zvdyIk.js";import{r as u}from"./index.RH_Wq4ov.js";import{B as v}from"./button.CKqbtVu8.js";import{c as w}from"./createLucideIcon.DCnupLqN.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],_=w("monitor",M);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],N=w("moon",x);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],R=w("sun",D),j="modulepreload",b=function(o){return"/"+o},A={},H=function(c,s,g){let h=Promise.resolve();if(s&&s.length>0){let l=function(n){return Promise.all(n.map(m=>Promise.resolve(m).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),t=i?.nonce||i?.getAttribute("nonce");h=l(s.map(n=>{if(n=b(n),n in A)return;A[n]=!0;const m=n.endsWith(".css"),a=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const r=document.createElement("link");if(r.rel=m?"stylesheet":j,m||(r.as="script"),r.crossOrigin="",r.href=n,t&&r.setAttribute("nonce",t),document.head.appendChild(r),m)return new Promise((f,y)=>{r.addEventListener("load",f),r.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${n}`)))})}))}function T(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return h.then(l=>{for(const i of l||[])i.status==="rejected"&&T(i.reason);return c().catch(T)})},S=()=>typeof window>"u",e={LIGHT:"light",DARK:"dark",SYSTEM:"system"},k="theme",E="data-theme",K="data-transition-direction",p="dark",L="(prefers-color-scheme: dark)";S()||H(()=>import("./transitionController.CW2NVXhh.js").then(o=>o.a),[]).then(o=>{o.transitionController});const G=()=>{const o=()=>{if(S())return e.SYSTEM;const t=localStorage.getItem(k);return t&&[e.LIGHT,e.DARK,e.SYSTEM].includes(t)?t:e.SYSTEM},c=()=>{if(S())return e.LIGHT;const t=document.documentElement;return t.classList.contains(p)||t.getAttribute(E)===e.DARK?e.DARK:e.LIGHT},[s,g]=u.useState(o),[h,T]=u.useState(c);return u.useEffect(()=>{const t=()=>{const a=document.documentElement;let r;s===e.SYSTEM?r=window.matchMedia(L).matches?e.DARK:e.LIGHT:r=s,T(r);const f=()=>{r===e.DARK?(a.classList.add(p),a.setAttribute(E,e.DARK)):(a.classList.remove(p),a.setAttribute(E,e.LIGHT))},y=document.documentElement.hasAttribute(K);if(typeof document<"u"&&"startViewTransition"in document&&!y)try{document.startViewTransition(()=>f())}catch(I){console.warn("View transition failed, using fallback:",I),f()}else f();localStorage.setItem(k,s)};t();const n=window.matchMedia(L),m=()=>s===e.SYSTEM&&t();return n.addEventListener("change",m),()=>{n.removeEventListener("change",m)}},[s]),{theme:s,resolvedTheme:h,toggleTheme:()=>{g(t=>{switch(t){case e.LIGHT:return e.DARK;case e.DARK:return e.SYSTEM;case e.SYSTEM:return e.LIGHT;default:return e.LIGHT}})},setTheme:t=>{g(t)}}},Y=(o="light")=>{const c="h-4 w-4";return{light:d.jsx(R,{className:c}),dark:d.jsx(N,{className:c}),system:d.jsx(_,{className:c})}[o]},U=()=>{const{theme:o,toggleTheme:c}=G(),s=u.useRef(null),g=()=>Y(o),h=()=>({light:"Switch to dark mode",dark:"Switch to system theme",system:"Switch to light mode"})[o]||"Toggle theme",T=()=>{if(document.documentElement.hasAttribute("data-transition-direction")){const n=()=>{c(),document.removeEventListener("astro:after-swap",n)};document.addEventListener("astro:after-swap",n)}else c()},[l,i]=u.useState(!1);return u.useEffect(()=>{i(!0)},[]),u.useEffect(()=>{s.current&&(s.current.style.viewTransitionName="theme-toggle")},[]),l?d.jsxs(v,{ref:s,variant:"ghost",size:"icon",onClick:T,title:h(),className:"h-9 w-9",style:{viewTransitionName:"theme-toggle"},children:[g(),d.jsx("span",{className:"sr-only",children:h()})]}):d.jsxs(v,{variant:"ghost",size:"icon",className:"h-9 w-9",disabled:!0,style:{viewTransitionName:"theme-toggle"},children:[d.jsx(R,{className:"h-4 w-4"}),d.jsx("span",{className:"sr-only",children:"Loading theme toggle"})]})};export{U as ThemeToggle};
