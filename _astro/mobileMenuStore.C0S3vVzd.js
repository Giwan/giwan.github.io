import{r as o}from"./index.RH_Wq4ov.js";let s=[],f=0;const c=4;let d=n=>{let u=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(t){return e.lc=u.push(t),()=>{for(let r=f+c;r<s.length;)s[r]===t?s.splice(r,c):r+=c;let l=u.indexOf(t);~l&&(u.splice(l,1),--e.lc||e.off())}},notify(t,l){let r=!s.length;for(let i of u)s.push(i,e.value,t,l);if(r){for(f=0;f<s.length;f+=c)s[f](s[f+1],s[f+2],s[f+3]);s.length=0}},off(){},set(t){let l=e.value;l!==t&&(e.value=t,e.notify(l))},subscribe(t){let l=e.listen(t);return t(e.value),l},value:n};return e};function g(n,u,e){let t=new Set(u).add(void 0);return n.listen((l,r,i)=>{t.has(i)&&e(l,r,i)})}let a=(n,u)=>e=>{n.current!==e&&(n.current=e,u())};function E(n,{keys:u,deps:e=[n,u]}={}){let t=o.useRef();t.current=n.get();let l=o.useCallback(i=>(a(t,i)(n.value),u?.length>0?g(n,u,a(t,i)):n.listen(a(t,i))),e),r=()=>t.current;return o.useSyncExternalStore(l,r,r)}const b=d(!1),M=()=>b.set(!1),S=()=>b.set(!b.get());export{b as $,M as c,S as t,E as u};
